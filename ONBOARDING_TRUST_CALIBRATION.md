## Guided Onboarding & Trust Calibration Flow

## Overview

The **Guided Onboarding & Trust Calibration Flow** proves Dynasty Dominator's value within **30-60 seconds** through immediate, personalized insights rather than generic tutorials.

**Key Innovation:** Show value BEFORE asking for time/effort. The user should see results specific to THEIR team before being asked to do anything.

## Philosophy

### Traditional Onboarding (Bad)
```
1. Create account
2. Set preferences
3. Watch tutorial videos
4. Read documentation
5. Maybe see value eventually

Result: 80% drop-off, user never sees benefit
```

### Trust Calibration Onboarding (Good)
```
1. Import league (10 seconds)
2. See immediate team analysis (auto-generated)
3. See 3 actionable opportunities (personalized)
4. Try interactive demo (builds understanding)
5. Opt-in to alerts (user now understands value)

Result: User decides if tool is legit in 60 seconds
```

## Core Principle

**Every step must answer: "Is this app worth my time?"**

The answer comes from **personalized proof**, not promises:
- Not "We have great features" ‚Üí "Here are 3 things YOUR team should do today"
- Not "League-aware values" ‚Üí "We value Garrett Wilson higher because YOUR league starts 3 WR"
- Not "Smart calculator" ‚Üí "This trade helps you because YOUR team needs RB depth"

## 7-Step Flow

### 1. Welcome (5 seconds)

**Purpose:** Set expectations

**Content:**
```
Welcome to Dynasty Dominator
Get personalized insights for YOUR team in 60 seconds

Features (4 cards):
‚Ä¢ League-Aware Values
‚Ä¢ Instant Team Analysis
‚Ä¢ Proactive Alerts
‚Ä¢ Smart Trade Calculator

[Get Started] button
```

**Psychology:** Brief, focused on user benefit, creates anticipation

**Key Metrics:**
- Click-through rate to Step 2
- Time on screen (should be <10s)

### 2. League Import (20 seconds)

**Purpose:** Get data to personalize everything

**Critical First Screen:**
```
Import Your League
Everything else builds automatically
```

**Platform Options:**
- Sleeper (active)
- ESPN (coming soon)
- Manual (coming soon)

**After Import:**
- Resolve league_profile_id
- Run team analysis instantly
- Advance to Step 3 automatically

**Skip Option:** "Skip for now (you can import later)"

**Psychology:**
- Action first, setup never
- Clear value statement ("everything builds automatically")
- Low friction (just username/ID)

**Key Metrics:**
- Import success rate
- Time to import
- Skip rate (should be <20%)

### 3. Team Analysis (3 seconds)

**Purpose:** Build anticipation while processing

**Auto-Advancing Loading Screen:**
```
Analyzing Your Team
This will just take a moment...

‚úì Loading roster data
‚úì Calculating player values
‚ü≥ Analyzing team strategy
‚óã Identifying opportunities
```

**Implementation:**
- Auto-advance after 3 seconds
- Creates perceived processing
- Builds anticipation for results

**Psychology:**
- Shows work being done
- Increases perceived value of results
- Prevents "instant" feeling (too easy = less valuable)

### 4. Value Proof (30 seconds) ‚ö° MOST IMPORTANT SCREEN

**Purpose:** Prove the app understands YOUR team

**This is the decision moment** - User determines if app is legit

**Content Structure:**

**A) Confidence Meter**
```
Model Confidence: High (87%)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Components:
‚Ä¢ Data Completeness: 95% (excellent)
‚Ä¢ League Fit: 90% (excellent)
‚Ä¢ Historical Accuracy: 78% (good)

Recommendation: Trust trade recommendations, cross-reference major decisions
```

**Why This Works:** Psychology shows users trust outputs more when confidence is displayed

**B) Team Strength**
```
[CONTENDER] ‚Üê Big badge

Strengths:
WR ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 92% (Elite)
RB ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 78% (Strong)

Weaknesses:
TE ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 45% (Weakness)
```

**Why This Works:** Validates the model understands their team

**C) 3 Things To Do Today**
```
1. üü¢ Buy Low: Garrett Wilson (85% confidence)
   Market undervaluing due to QB instability, but target share elite

2. üî¥ Sell High: Tony Pollard (78% confidence)
   Peak value window before workload concerns resurface

3. ‚ûï Waiver Target: Roschon Johnson (72% confidence)
   Backup with clear path to starter role if injury occurs
```

**Why This Works:**
- Specific to their roster
- Actionable today
- Shows confidence percentages (builds trust)
- Explains WHY (not just what)

**D) Market vs Model Comparison**
```
Why we value Garrett Wilson higher:

We value Garrett Wilson 820 points higher (15% higher) than market

Reasons:
‚Ä¢ League Settings: Your league starts 3 WR (higher than standard 2),
  increasing WR scarcity (+450)
‚Ä¢ Position Scarcity: Elite WR scarcity premium (top-tier production
  is rare) (+280)
‚Ä¢ Age Profile: Age 23 is peak window for WR (typically 24-28) (+90)
```

**Why This Works:**
- Shows league-specific reasoning
- Not generic rankings
- User understands WHY values differ
- Builds trust in "league-aware" claim

**CTA:** [See How It Works]

**Key Metrics:**
- Time on screen (should be 20-40s)
- Click-through to Step 5
- Drop-off rate (critical)

### 5. Trade Demo (30 seconds)

**Purpose:** Show HOW league-aware values work

**Interactive Walkthrough:**

**Step A: Example Trade**
```
Try the Trade Calculator

You Give:                  You Receive:
‚Ä¢ Tony Pollard (4,200)     ‚Ä¢ Garrett Wilson (5,200)
‚Ä¢ 2024 2nd (800)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Total: 5,000              Total: 5,200

[Evaluate Trade]
```

**Step B: Results**
```
‚úì Fair Trade

Value Analysis:
You Give: 5,000
You Receive: 5,200
Net Gain: +200

Team Fit:
‚úì Positional Need: Upgrades WR corps
‚úì Strategy Fit: Contender move

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Why we value Garrett Wilson higher:
Your league starts 3 WR (higher than standard 2), increasing WR
scarcity. Elite target volume provides stable floor despite QB
instability.

[Got it! Continue]
```

**Step C: Understanding**
```
You're Ready!
Now you understand how league-aware values work

Remember:
‚Ä¢ Values adjust for YOUR league settings
‚Ä¢ We consider team strategy and positional needs
‚Ä¢ Fairness thresholds prevent bad trades

[Continue]
```

**Psychology:**
- Learning by doing (not reading)
- Real example they could execute
- Shows league-specific reasoning in context
- Builds confidence in tool

**Key Metrics:**
- Completion rate
- Time per step
- Understanding (could survey)

### 6. Alerts Setup (15 seconds)

**Purpose:** Opt-in to notifications AFTER seeing value

**Timing Matters:** User now understands benefit

**Content:**
```
Stay Ahead of Opportunities
Get notified when your team can improve

What you'll be notified about:
‚Ä¢ Buy Low Opportunities ‚Äî When watched players become undervalued
‚Ä¢ Value Changes ‚Äî Significant changes (300+) for watched players
‚Ä¢ Breakout Alerts ‚Äî Players about to surge (72h expires)
‚Ä¢ Daily Digest ‚Äî Morning summary (6 AM)

[‚úì] Enable personalized alerts

FREE:                      PREMIUM:
5 alerts/day               50 alerts/day
Critical/High only         All priorities
Hourly batch               Real-time
Breakout alerts            + Early buy low access
                          + League-aware opportunities

[Enable Alerts & Continue]
```

**Psychology:**
- Asked AFTER value demonstrated
- Clear benefit (not spam)
- Free vs premium comparison (anchoring)
- Can customize later (low commitment)

**Key Metrics:**
- Opt-in rate (should be >60%)
- Premium awareness

### 7. Complete (10 seconds)

**Purpose:** Victory moment + next steps

**Content:**
```
‚úì You're Ready!
Your personalized dynasty dashboard is ready

Waiting for you on the dashboard:
‚Ä¢ 2 Buy Low Opportunities
‚Ä¢ 1 Trade Opportunity
‚Ä¢ 1 Waiver Upgrade

[Go to Dashboard]

Tip: Add players to your watchlist to get personalized alerts

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
What to explore next:
‚Ä¢ Trade Calculator ‚Äî Evaluate any trade
‚Ä¢ Player Rankings ‚Äî Top 1000 adjusted for your league
‚Ä¢ Team Advice ‚Äî Personalized buy/sell/hold recommendations
‚Ä¢ Watchlist ‚Äî Follow key players
```

**Psychology:**
- Success feeling (gamification)
- Clear opportunities waiting (creates urgency)
- Guidance on what to do next (reduces confusion)

**Key Metrics:**
- Click-through to dashboard
- First action taken after onboarding

## State Machine

### Database Schema

```sql
CREATE TABLE user_onboarding_state (
  user_id uuid PRIMARY KEY,
  step text NOT NULL DEFAULT 'welcome',
  completed boolean NOT NULL DEFAULT false,
  league_id uuid,
  metadata jsonb DEFAULT '{}',
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

### Step Progression

```
welcome
  ‚Üì
league_import
  ‚Üì
team_analysis (auto-advance 3s)
  ‚Üì
value_proof (CRITICAL)
  ‚Üì
trade_demo
  ‚Üì
alerts_setup
  ‚Üì
complete
```

### State Management Functions

```typescript
// Check if user needs onboarding
shouldShowOnboarding(userId): boolean

// Get current state
getOnboardingState(userId): OnboardingState | null

// Initialize for new user
initializeOnboarding(userId): OnboardingState

// Advance to next step
advanceOnboardingStep(userId, metadata?): OnboardingState

// Jump to specific step
setOnboardingStep(userId, step): OnboardingState

// Complete onboarding
completeOnboarding(userId): boolean

// Skip with reason
skipOnboarding(userId, reason): boolean

// Reset for new league/season
resetOnboarding(userId, reason): boolean
```

## Skip Logic

**When to show onboarding:**
- New user (never completed)
- In progress (not completed)

**When NOT to show:**
- Completed onboarding
- User has existing leagues (unless new league imported)
- Season hasn't rolled over

**Reset Conditions:**
- User imports new league after completing onboarding
- Season rollover detected (e.g., 2024 ‚Üí 2025)

**Implementation:**
```typescript
async function shouldShowOnboarding(userId: string): Promise<boolean> {
  const state = await getOnboardingState(userId);

  // New user
  if (!state) return true;

  // Completed
  if (state.completed) {
    // Check reset conditions
    const shouldReset = await checkResetConditions(userId, state);
    return shouldReset;
  }

  // In progress
  return true;
}
```

## Confidence Meter System

**Purpose:** Users psychologically accept outputs more when confidence is displayed

**Components (weighted):**

1. **Data Completeness (40%)**
   - League imported: 40 pts
   - League profile resolved: 10 pts
   - Team roster loaded: 20 pts
   - Player values synced: 20 pts
   - User has watchlist: 10 pts

2. **League Fit (35%)**
   - League profile exists: 50 pts
   - Scoring settings configured: 25 pts
   - Roster settings configured: 25 pts

3. **Prediction Accuracy (25%)**
   - Historical accuracy rate
   - Defaults to 70% (neutral) if no history

**Confidence Levels:**
- 85-100: Very High
- 70-84: High
- 50-69: Medium
- 0-49: Low

**Display:**
```
Model Confidence: High (87%)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Components:
‚Ä¢ Data Completeness: 95% (excellent)
‚Ä¢ League Fit: 90% (excellent)
‚Ä¢ Historical Accuracy: 78% (good)

Recommendation: High confidence ‚Äî Trust trade recommendations
```

**Psychology:**
- Transparency builds trust
- Shows what could improve confidence
- Gives users control (import league ‚Üí higher confidence)

## Market vs Model Comparison

**Purpose:** Explain WHY values differ from market consensus

**Comparison Factors:**

1. **League Settings (category: league_settings)**
   ```
   Example: "Your league starts 3 WR (higher than standard 2),
   increasing WR scarcity" (+450)
   ```

2. **Scarcity Adjustment (category: scarcity)**
   ```
   Example: "Elite RB scarcity premium (top-tier production is rare)" (+300)
   ```

3. **Production Context (category: context)**
   ```
   Example: "Bellcow workload (85%+ snaps) provides stable floor
   and ceiling" (+400)
   ```

4. **Age Profile (category: production)**
   ```
   Example: "Age 23 is peak window for WR (typically 24-28)" (+100)
   ```

5. **Market Inefficiency (category: market_inefficiency)**
   ```
   Example: "Market consensus has not yet adjusted to recent
   production increase" (+250)
   ```

**Display Format:**
```
We value [Player] [X] points [higher/lower] ([Y]% [higher/lower]) than market

Reasons:
‚Ä¢ [Factor 1]: [Explanation] (+[Impact])
‚Ä¢ [Factor 2]: [Explanation] (+[Impact])
‚Ä¢ [Factor 3]: [Explanation] (+[Impact])

Confidence: [High/Medium/Low]
```

**Example:**
```
We value Garrett Wilson 820 points higher (15% higher) than market

Reasons:
‚Ä¢ League Settings: Your league starts 3 WR (higher than standard 2),
  increasing WR scarcity (+450)
‚Ä¢ Position Scarcity: Elite WR scarcity premium (top-tier production
  is rare) (+280)
‚Ä¢ Age Profile: Age 23 is peak window for WR (typically 24-28) (+90)

Confidence: High
```

## Component Library

### 1. Main Onboarding Flow

**Component:** `src/components/Onboarding.tsx`

```typescript
<Onboarding onComplete={() => navigateToDashboard()} />
```

**Features:**
- Progress bar (shows % complete)
- Skip button (always visible)
- Step routing
- State management
- Auto-save progress

### 2. Individual Steps

**Components:**
- `src/components/onboarding/WelcomeStep.tsx`
- `src/components/onboarding/LeagueImportStep.tsx`
- `src/components/onboarding/TeamAnalysisStep.tsx`
- `src/components/onboarding/ValueProofStep.tsx`
- `src/components/onboarding/TradeDemoStep.tsx`
- `src/components/onboarding/AlertsSetupStep.tsx`
- `src/components/onboarding/CompleteStep.tsx`

**Each step:**
- Self-contained
- Receives onNext callback
- Handles own data fetching
- Shows loading states
- Responsive design

### 3. Onboarding Hook

**Hook:** `src/hooks/useOnboarding.tsx`

```typescript
const { needsOnboarding, currentStep, loading, refresh } = useOnboarding();

if (loading) return <Loading />;

if (needsOnboarding) {
  return <Onboarding onComplete={refresh} />;
}

return <Dashboard />;
```

**Features:**
- Auto-detects onboarding need
- Provides current state
- Refresh function
- Works with auth

## Integration

### App-Level Integration

```typescript
import { Onboarding } from './components/Onboarding';
import { useOnboarding } from './hooks/useOnboarding';

function App() {
  const { needsOnboarding, loading } = useOnboarding();

  if (loading) return <LoadingScreen />;

  if (needsOnboarding) {
    return <Onboarding onComplete={() => setNeedsOnboarding(false)} />;
  }

  return <MainApp />;
}
```

### Route Protection

```typescript
// Only show onboarding for authenticated users
{user && needsOnboarding ? (
  <Onboarding />
) : (
  <Routes>
    <Route path="/" element={<Dashboard />} />
    {/* ... other routes ... */}
  </Routes>
)}
```

## Key Metrics

### Completion Funnel

```
Step 1: Welcome        ‚Üí 100% (baseline)
Step 2: League Import  ‚Üí 80% (20% skip - acceptable)
Step 3: Team Analysis  ‚Üí 78% (2% drop - auto-advance)
Step 4: Value Proof    ‚Üí 75% (3% drop - WATCH THIS)
Step 5: Trade Demo     ‚Üí 72% (3% drop)
Step 6: Alerts Setup   ‚Üí 70% (2% drop)
Step 7: Complete       ‚Üí 68% (2% drop)
```

**Target: 65%+ completion rate**

**Critical Dropoff Points:**
- Step 2 ‚Üí 3: League import failure
- Step 4 ‚Üí 5: Value proof didn't convince (MOST IMPORTANT)

### Engagement Metrics

**Time to Value:**
- Target: <60 seconds to see "3 Things To Do Today"
- Measure: Time from Step 1 start to Step 4 display

**Personalization Impact:**
- % of users who see league-specific reasons
- Confidence meter avg score
- Market vs model comparisons shown

**Conversion Metrics:**
- Alert opt-in rate (target: >60%)
- First action after onboarding
- Day 7 retention (onboarded vs skipped)

### Quality Metrics

**Value Proof Effectiveness:**
- Time spent on Step 4 (should be 20-40s)
- Did user proceed? (vs drop-off)
- Survey: "Did you understand why values differ?" (Y/N)

**Trade Demo Effectiveness:**
- Completion rate per sub-step
- Time to complete
- Survey: "Do you understand league-aware values?" (Y/N)

## Benefits

### For Users

**Immediate Value:**
- See personalized insights in 60 seconds
- No setup required (just import)
- Understand tool before committing time

**Trust Building:**
- Confidence meter shows data quality
- Market comparison explains reasoning
- Interactive demo builds understanding

**Reduced Friction:**
- No account setup first
- No preference configuration
- No tutorial videos
- Action ‚Üí Results ‚Üí Understanding

### For Product

**Activation:**
- Users see value immediately
- Higher completion rates
- Lower time to first value

**Retention:**
- Users understand tool deeply
- Trust calibrated correctly
- Clear next steps

**Conversion:**
- Premium features showcased in context
- User already experienced value
- Clear upgrade path

**Data Quality:**
- League import drives accuracy
- Early engagement drives data
- Watchlist adoption

## Psychology Principles

### 1. Show, Don't Tell

**Bad:** "We have league-aware values"
**Good:** "We value Garrett Wilson higher because YOUR league starts 3 WR"

### 2. Immediate Gratification

**Bad:** Setup ‚Üí Configure ‚Üí Learn ‚Üí Maybe see value
**Good:** Import ‚Üí Instant insights ‚Üí Understanding ‚Üí More features

### 3. Progressive Disclosure

**Bad:** All features at once (overwhelming)
**Good:** Core value ‚Üí How it works ‚Üí Additional features

### 4. Trust Through Transparency

**Bad:** "Trust us, we're accurate"
**Good:** "87% confidence based on: Data completeness (95%), League fit (90%), Accuracy (78%)"

### 5. Action Before Learning

**Bad:** Watch tutorial ‚Üí Read docs ‚Üí Try tool
**Good:** Try tool ‚Üí See results ‚Üí Understand how

### 6. Personalization Beats Features

**Bad:** "We have 50 features"
**Good:** "Here are 3 things YOUR team should do today"

### 7. Timing Matters

**Bad:** "Enable alerts?" (before seeing value)
**Good:** "Want alerts when YOUR team can improve?" (after seeing value)

## Summary

The **Guided Onboarding & Trust Calibration Flow** transforms first-time user experience from friction-filled setup to instant value demonstration.

**Key Innovation:** Prove value in 30-60 seconds through immediate, personalized insights.

**Critical Success Factor:** Step 4 (Value Proof) must convince user the tool understands THEIR team and provides actionable insights.

**Files Created:**
- `src/lib/onboarding/onboardingStateMachine.ts` - State management
- `src/lib/onboarding/compareMarketVsModel.ts` - Value comparison engine
- `src/lib/onboarding/confidenceMeter.ts` - Confidence calculation
- `src/hooks/useOnboarding.tsx` - React hook
- `src/components/Onboarding.tsx` - Main flow orchestrator
- `src/components/onboarding/WelcomeStep.tsx` - Step 1
- `src/components/onboarding/LeagueImportStep.tsx` - Step 2
- `src/components/onboarding/TeamAnalysisStep.tsx` - Step 3
- `src/components/onboarding/ValueProofStep.tsx` - Step 4 (CRITICAL)
- `src/components/onboarding/TradeDemoStep.tsx` - Step 5
- `src/components/onboarding/AlertsSetupStep.tsx` - Step 6
- `src/components/onboarding/CompleteStep.tsx` - Step 7

**Database:**
- `user_onboarding_state` table
- Helper functions for state management

**Result:** Users decide if Dynasty Dominator is worth their time in 60 seconds based on personalized proof, not promises. Trust is calibrated through transparency, not marketing claims.
